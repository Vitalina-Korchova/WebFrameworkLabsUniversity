(()=>{"use strict";var e={419:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Library=void 0,t.Library=class{constructor(){this.items=[]}addItem(e){this.items.push(e)}getAllItems(){return this.items}findItem(e){return this.items.find(e)}removeItem(e){this.items=this.items.filter((t=>!e(t)))}clear(){this.items.length=0}}},524:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.User=t.Book=void 0,t.Book=class{constructor(e,t,r){this.nameBook=e,this.authorBook=t,this.releaseYearBook=r}printInfo(){return`${this.nameBook} by ${this.authorBook}(${this.releaseYearBook})`}},t.User=class{constructor(e,t,r){this.idUrser=e,this.nameUser=t,this.emailUser=r}printInfo(){return`${this.idUrser} ${this.nameUser} ${this.emailUser}`}}},154:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryService=void 0;const o=r(524),a=r(419),s=r(421);t.LibraryService=class{constructor(){this.booksLibrary=new a.Library,this.userLibrary=new a.Library,this.borrowStatus={},this.loadData()}addBook(e){this.booksLibrary.addItem(e),this.saveData()}addUser(e){this.userLibrary.addItem(e),this.saveData()}getAllBooks(){return this.booksLibrary.getAllItems()}getAllUsers(){return this.userLibrary.getAllItems()}findBook(e){return this.booksLibrary.findItem(e)}findUser(e){return this.userLibrary.findItem(e)}borrowBook(e,t){if(this.borrowStatus[e])return!1;const r=this.findBook((t=>t.printInfo().includes(e))),o=this.findUser((e=>e.printInfo().startsWith(t.toString())));return!(!r||!o||(this.borrowStatus[e]=t,this.saveData(),0))}returnBook(e){return!!this.borrowStatus[e]&&(delete this.borrowStatus[e],this.saveData(),!0)}getBorrowedBooks(){return Object.entries(this.borrowStatus).map((([e,t])=>({bookName:e,userId:t})))}saveData(){s.Storage.saveData("books",this.booksLibrary.getAllItems()),s.Storage.saveData("users",this.userLibrary.getAllItems()),s.Storage.saveData("borrowStatus",this.borrowStatus)}loadData(){const e=s.Storage.loadData("books"),t=s.Storage.loadData("users"),r=s.Storage.loadData("borrowStatus");e.forEach((e=>this.booksLibrary.addItem(new o.Book(e.nameBook,e.authorBook,e.releaseYearBook)))),t.forEach((e=>this.userLibrary.addItem(new o.User(e.idUrser,e.nameUser,e.emailUser)))),this.borrowStatus=r}clearBooks(){this.booksLibrary.clear(),this.saveData()}}},421:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0,t.Storage=class{static saveData(e,t){localStorage.setItem(e,JSON.stringify(t))}static loadData(e){return JSON.parse(localStorage.getItem(e)||"[]")}static clearData(e){localStorage.removeItem(e)}static saveElementState(e,t){localStorage.setItem(e,t)}static loadElementState(e){return localStorage.getItem(e)||""}}}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}(()=>{const e=r(524),t=r(154),o=r(421);class a{constructor(){this.libraryService=new t.LibraryService,console.log(this.libraryService.getAllBooks()),document.addEventListener("DOMContentLoaded",(()=>{this.loadVisualState(),this.main()}))}saveVisualState(){const e=document.querySelector(".book_items");e&&o.Storage.saveElementState("bookItems",e.innerHTML)}loadVisualState(){const e=document.querySelector(".book_items");e&&(e.innerHTML=o.Storage.loadElementState("bookItems"))}main(){var t;null===(t=document.querySelector(".input_add_book"))||void 0===t||t.addEventListener("click",(()=>{var t,r,o;const a=document.querySelector(".book_items"),s=null===(t=document.querySelector(".input_name_book"))||void 0===t?void 0:t.value,i=null===(r=document.querySelector(".input_author_book"))||void 0===r?void 0:r.value,n=null===(o=document.querySelector(".input_release_year"))||void 0===o?void 0:o.value,l=new e.Book(s,i,parseInt(n));this.libraryService.addBook(l),this.saveVisualState();const d=document.createElement("div"),u=document.createElement("div");u.classList.add("d-flex","justify-content-between");const c=document.createElement("span");c.textContent=l.printInfo();const m=document.createElement("button");m.textContent="Позичити";const h=document.createElement("hr");u.appendChild(c),u.appendChild(m),d.appendChild(u),d.appendChild(h),null==a||a.appendChild(d)}))}}document.addEventListener("DOMContentLoaded",(()=>{console.log("DOM fully loaded and parsed"),new a}))})()})();