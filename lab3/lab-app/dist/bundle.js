(()=>{"use strict";var e={419:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Library=void 0,t.Library=class{constructor(){this.items=[]}addItem(e){this.items.push(e)}getAllItems(){return this.items}findItem(e){return this.items.find(e)}removeItem(e){this.items=this.items.filter((t=>!e(t)))}clear(){this.items.length=0}}},524:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.User=t.Book=void 0,t.Book=class{constructor(e,t,r){this.nameBook=e,this.authorBook=t,this.releaseYearBook=r}printInfo(){return`${this.nameBook} by ${this.authorBook} (${this.releaseYearBook})`}},t.User=class{constructor(e,t,r){this.idUrser=e,this.nameUser=t,this.emailUser=r}printInfo(){return`ID: ${this.idUrser},  ${this.nameUser} ${this.emailUser}`}}},154:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryService=void 0;const o=r(524),s=r(419),a=r(421);t.LibraryService=class{constructor(){this.booksLibrary=new s.Library,this.userLibrary=new s.Library,this.borrowStatus={},this.loadData()}addBook(e){this.booksLibrary.addItem(e),this.saveData()}addUser(e){this.userLibrary.addItem(e),this.saveData()}getAllBooks(){return this.booksLibrary.getAllItems()}getAllUsers(){return this.userLibrary.getAllItems()}findBook(e){return this.booksLibrary.findItem(e)}findUser(e){return this.userLibrary.findItem(e)}borrowBook(e,t){if(this.borrowStatus[e])return!1;const r=this.findBook((t=>t.printInfo().includes(e))),o=this.findUser((e=>e.printInfo().startsWith(t.toString())));return!(!r||!o||(this.borrowStatus[e]=t,this.saveData(),0))}returnBook(e){return!!this.borrowStatus[e]&&(delete this.borrowStatus[e],this.saveData(),!0)}getBorrowedBooks(){return Object.entries(this.borrowStatus).map((([e,t])=>({bookName:e,userId:t})))}saveData(){a.Storage.saveData("books",this.booksLibrary.getAllItems()),a.Storage.saveData("users",this.userLibrary.getAllItems()),a.Storage.saveData("borrowStatus",this.borrowStatus)}loadData(){const e=a.Storage.loadData("books"),t=a.Storage.loadData("users"),r=a.Storage.loadData("borrowStatus");e.forEach((e=>this.booksLibrary.addItem(new o.Book(e.nameBook,e.authorBook,e.releaseYearBook)))),t.forEach((e=>this.userLibrary.addItem(new o.User(e.idUrser,e.nameUser,e.emailUser)))),this.borrowStatus=r}clearBooks(){this.booksLibrary.clear(),this.saveData(),a.Storage.clearData("book_items")}clearUsers(){this.userLibrary.clear(),this.saveData(),a.Storage.clearData("user_items")}}},421:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0,t.Storage=class{static saveData(e,t){localStorage.setItem(e,JSON.stringify(t))}static loadData(e){return JSON.parse(localStorage.getItem(e)||"[]")}static clearData(e){localStorage.removeItem(e)}static saveElementState(e,t){localStorage.setItem(e,t)}static loadElementState(e){return localStorage.getItem(e)||""}}}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}(()=>{const e=r(524),t=r(154),o=r(421);class s{constructor(){this.libraryService=new t.LibraryService,console.log(this.libraryService.getAllBooks()),console.log(this.libraryService.getAllUsers()),this.loadDataFromLocalStorage(),this.blockBooks(),this.blockUsers()}loadDataFromLocalStorage(){const e=o.Storage.loadElementState("book_items"),t=document.querySelector(".book_items");t&&e&&(t.innerHTML=e);const r=o.Storage.loadElementState("user_items"),s=document.querySelector(".user_items");s&&r&&(s.innerHTML=r)}blockBooks(){var t,r;null===(t=document.querySelector(".btn_clear_books"))||void 0===t||t.addEventListener("click",(()=>{this.libraryService.clearBooks();const e=document.querySelector(".book_items");e&&(e.innerHTML=""),o.Storage.clearData("book_items")})),null===(r=document.querySelector(".input_add_book"))||void 0===r||r.addEventListener("click",(()=>{var t,r,s;const a=document.querySelector(".book_items"),i=null===(t=document.querySelector(".input_name_book"))||void 0===t?void 0:t.value,n=null===(r=document.querySelector(".input_author_book"))||void 0===r?void 0:r.value,l=null===(s=document.querySelector(".input_release_year"))||void 0===s?void 0:s.value,d=new e.Book(i,n,parseInt(l));this.libraryService.addBook(d);const c=document.createElement("div"),u=document.createElement("div");u.classList.add("d-flex","justify-content-between");const m=document.createElement("span");m.textContent=d.printInfo(),m.classList.add("fs-5");const h=document.createElement("button");h.textContent="Позичити";const b=document.createElement("hr");u.appendChild(m),u.appendChild(h),c.appendChild(u),c.appendChild(b),null==a||a.appendChild(c),o.Storage.saveElementState("book_items",(null==a?void 0:a.innerHTML)||"")}))}blockUsers(){var t,r;let s=1;null===(t=document.querySelector(".btn_clear_users"))||void 0===t||t.addEventListener("click",(()=>{this.libraryService.clearUsers();const e=document.querySelector(".user_items");e&&(e.innerHTML=""),o.Storage.clearData("user_items")})),null===(r=document.querySelector(".input_add_user"))||void 0===r||r.addEventListener("click",(()=>{var t,r;const a=document.querySelector(".user_items"),i=null===(t=document.querySelector(".input_username"))||void 0===t?void 0:t.value,n=null===(r=document.querySelector(".input_email"))||void 0===r?void 0:r.value,l=s++,d=new e.User(l,i,n);this.libraryService.addUser(d);const c=document.createElement("div"),u=document.createElement("div");u.classList.add("d-flex","justify-content-between");const m=document.createElement("span");m.textContent=d.printInfo(),m.classList.add("fs-5");const h=document.createElement("button");h.textContent="Позичити";const b=document.createElement("hr");u.appendChild(m),u.appendChild(h),c.appendChild(u),c.appendChild(b),null==a||a.appendChild(c),o.Storage.saveElementState("user_items",(null==a?void 0:a.innerHTML)||"")}))}}document.addEventListener("DOMContentLoaded",(()=>{console.log("DOM fully loaded and parsed"),new s}))})()})();